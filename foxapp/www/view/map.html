<ion-content title="Map">
    <ng-include src="'view/search.html'"></ng-include>

    <div ng-controller="GMapController" style="height: 100%; width: 100%;"id="fox-map" map-lazy-load="https://maps.google.com/maps/api/js">
    <div style="width: 5%; height: 100%; z-index: 3000000; position: absolute; margin-top: 10%; margin-left: 0;" on-touch="enableSwipe()" on-release="disableSwipe()">

    </div>
      <div style="width: 10%; height: 100%; z-index: 3000000; position: absolute; margin-top: 10%; margin-left: 85%;" on-touch="enableSwipe()">

      </div>
      <ng-map disable-default-u-i="true"
            center="[{{position.lat}}, {{position.lng}}]"
            map-type-id="terrain"
            styles="[{featureType:'administrative',elementType:'all',stylers:[{visibility:'on'}]},{featureType:'administrative',elementType:'labels.text.fill',stylers:[{color:'#9d935e'}]},{featureType:'administrative',elementType:'labels.text.stroke',stylers:[{color:'#3f3b28'}]},{featureType:'landscape',elementType:'geometry.fill',stylers:[{color:'#5a5335'}]},{featureType:'landscape.man_made',elementType:'geometry.fill',stylers:[{color:'#4d4329'}]},{featureType:'landscape.man_made',elementType:'geometry.stroke',stylers:[{visibility:'off'}]},{featureType:'landscape.natural.terrain',elementType:'geometry.fill',stylers:[{color:'#6e6950'}]},{featureType:'poi',elementType:'geometry.fill',stylers:[{color:'#372f14'}]},{featureType:'poi',elementType:'labels',stylers:[{visibility:'off'}]},{featureType:'poi.park',elementType:'geometry.fill',stylers:[{color:'#372f14'}]},{featureType:'road',elementType:'all',stylers:[{saturation:-100},{lightness:45},{color:'#959358'}]},{featureType:'road',elementType:'labels.text',stylers:[{visibility:'off'}]},{featureType:'road.highway',elementType:'all',stylers:[{visibility:'simplified'}]},{featureType:'road.arterial',elementType:'labels.icon',stylers:[{visibility:'off'}]},{featureType:'transit',elementType:'all',stylers:[{visibility:'off'}]},{featureType:'water',elementType:'geometry.fill',stylers:[{color:'#344144'}]}]"
            zoom="15" >
        <shape name="polyline"
               path={{GPSTrace}}
               geodesic="true"
               stroke-color="#FF0000"
               stroke-opacity="1.0"
               stroke-weight="2">
        </shape>
        <marker ng-repeat="Object in foxMarkers | filterByCriteria:plantname:category"
                id="{{Object._id}}"
                on-click="showDetail(Object)"
                position=[{{Object.coords.latitude}},{{Object.coords.longitude}}]
                icon="{
                            url:'pictures/icons/{{Object.typep}}.png',
                            scaledSize:[20,20]
                            }"
        >
        </marker>
        <marker position="[{{position.lat}},{{position.lng}}]"
                icon="{
                            url:'pictures/icons/me.png',
                            scaledSize:[20,20]
                            }"
        >
        </marker>
        <info-window id="foo-iw">
            <div ng-non-bindable="">
                <img ng-src="{{poi.icon}}" />
                Name: {{poi.name}}<br/>
                Description: {{poi.desc}}<br/>
                Danger: {{poi.dangerzone}}<br/>
                Visitors: {{poi.people}}<br/>
                Created by: {{poi.user.displayName}}<br/>
                <img ng-src="{{dbpath}}{{poi.image}}" /><br/>
                <div id="plant-info" ng-hide="poi.plant == null">
                    <h3>Plant informations:</h3>
                    Common name: {{poi.plant.commonName}}<br/>
                    <img ng-src="{{poi.plant.image[0]}}" />
                    Latin name: {{poi.plant.latinName}}<br/>
                    Family: {{poi.plant.family}}<br/>
                    Genre: {{poi.plant.genre}}<br/>
                    <div ng-repeat="useElem in poi.plant.uses">
                        <img ng-src="{{ useElem.theme.icon }}" width="5%"  />
                        <h3 ng-bind="useElem.theme.desc"></h3>
                        <p>{{useElem.desc}}</p>
                    </div>
                    <small>
                        <em class="text-muted">
                            Posted on
                            <span ng-bind="poi.plant.created | date:'mediumDate'"></span>
                            by
                            <span ng-if="poi.plant.user"
                                  ng-bind="poi.plant.user.displayName"></span>
                            <span ng-if="!poi.plant.user">Deleted User</span>
                        </em>
                    </small>
                </div>
                <div ng-controller="GMapController">

                    <a title="Up Votes" ng-click="vote({{poi}},1)"  >+</a>
                    {{poi.score}}
                    <a title="Down Votes" ng-click="vote({{poi}},0)"   >-</a><!-- class="glyphicon glyphicon-chevron-down"ng-class="{true:'down', false:''}[vote=='down']"-->
                </div>
            </div>
        </info-window>
    </ng-map>
</div>
</ion-content>
