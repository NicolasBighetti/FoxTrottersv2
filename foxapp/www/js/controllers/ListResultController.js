/**
 * Created by user on 14/06/17.
 */
angular.module('foxapp')

.controller('ListResultController',['$scope','PhotoService','PictureUploadService','RESTService',
  function($scope, PhotoService, PictureUploadService, RESTService){
      $scope.listResult = [];

      $scope.quantity = 4;

      $scope.showResults = true;

      PhotoService.readyCamera();

      $scope.takePicture = function(){
        return PhotoService.takePicture(PhotoService.cameraDefaultOps);
      };

      $scope.uploadPhoto = function(){

      };

    $scope.recognizePlant = function(promise){
      promise.then(
        function(data){
          if(data === undefined){
            return;
          }

          PictureUploadService.upload(data, dbPath + "api/planders/").then(
            function(data) {
              var json = JSON.parse(data);

              RESTService.get(dbPath + "api/planders/result/" + json._id).then(
                function (result) {
                  $scope.listResult = JSON.parse(result);
                  $scope.showResults = false;
                }
              );
            }
          );


        }
      );
    };

    $scope.hideResults = function(){
      $scope.showResults = true;
    };

    //$scope.listResult = {"status":"OK","results":[{"name":"Zantedeschia aethiopica (L.) Spreng.","score":"26.6010113","images":[{"id":"ac2ca8c6aa51ed4aff1ef93adfe846bf/307060.jpg","tag":"flower","url":"https://bs.plantnet-project.org/img/99efe58003396358db31807d0964c298f15f0854","m_url":"https://bs.plantnet-project.org/th/m/99efe58003396358db31807d0964c298f15f0854","s_url":"https://bs.plantnet-project.org/th/s/99efe58003396358db31807d0964c298f15f0854","author":"Elodie Veyssiere"},{"id":"45446bc37162446e3f14034a98bfefc4/eol_972a843bbc4a9f4951769cea55daf16b","tag":"flower","url":"https://bs.plantnet-project.org/img/fcdd24d065d581d3f41008a8c183cf989d70a63f","m_url":"https://bs.plantnet-project.org/th/m/fcdd24d065d581d3f41008a8c183cf989d70a63f","s_url":"https://bs.plantnet-project.org/th/s/fcdd24d065d581d3f41008a8c183cf989d70a63f","author":"Faestorilio"},{"id":"45446bc37162446e3f14034a9821840d/eol_9192b8086b68b5a7a69e9b1bc613fd00","tag":"flower","url":"https://bs.plantnet-project.org/img/49f4ad7bba31041538c977df25a6d397e40eca41","m_url":"https://bs.plantnet-project.org/th/m/49f4ad7bba31041538c977df25a6d397e40eca41","s_url":"https://bs.plantnet-project.org/th/s/49f4ad7bba31041538c977df25a6d397e40eca41","author":"Adam C. Bad Wound"},{"id":"45446bc37162446e3f14034a98bfacb8/eol_1abae2de46b074cc8cb45c820db12000","tag":"flower","url":"https://bs.plantnet-project.org/img/c5877497f06a5b6ec693b000462c89b22937cd15","m_url":"https://bs.plantnet-project.org/th/m/c5877497f06a5b6ec693b000462c89b22937cd15","s_url":"https://bs.plantnet-project.org/th/s/c5877497f06a5b6ec693b000462c89b22937cd15","author":"Hedwig Storch"},{"id":"45446bc37162446e3f14034a98bf6364/eol_8566cb99eb06d548fa908ae30dcbddb2","tag":"flower","url":"https://bs.plantnet-project.org/img/1141223a306e621d30324271354c6b013ef661da","m_url":"https://bs.plantnet-project.org/th/m/1141223a306e621d30324271354c6b013ef661da","s_url":"https://bs.plantnet-project.org/th/s/1141223a306e621d30324271354c6b013ef661da","author":"Júlio Reis (Tintazul)"},{"id":"fa104497f907a2fa72d750595babcb87/325505.jpg","tag":"flower","url":"https://bs.plantnet-project.org/img/4d64f91e5c3a88f2b19031c117468cc4d8d71472","m_url":"https://bs.plantnet-project.org/th/m/4d64f91e5c3a88f2b19031c117468cc4d8d71472","s_url":"https://bs.plantnet-project.org/th/s/4d64f91e5c3a88f2b19031c117468cc4d8d71472","author":"Eline van Bemmel"}],"fam":"Araceae","gen":"Zantedeschia","sp":"Zantedeschia aethiopica (L.) Spreng.","cn":["Altar-lily","Arum Lily"]},{"name":"Ginkgo biloba L.","score":"17.0344868","organ":"scan","images":[{"id":"3bd60f74714e9fa767d21352c9e3e973/200538.jpg","tag":"leaf","url":"https://bs.plantnet-project.org/img/4fd1bb9b76de41d3f19b9e8db8f66c016959fa60","m_url":"https://bs.plantnet-project.org/th/m/4fd1bb9b76de41d3f19b9e8db8f66c016959fa60","s_url":"https://bs.plantnet-project.org/th/s/4fd1bb9b76de41d3f19b9e8db8f66c016959fa60","author":"Pierre Bonnet"},{"id":"211efee71013ba7e5fc1f3803ce74767/107779.jpg","tag":"fruit","url":"https://bs.plantnet-project.org/img/b3de4566f4cdba0551e9b59ed0971ff35a38a747","m_url":"https://bs.plantnet-project.org/th/m/b3de4566f4cdba0551e9b59ed0971ff35a38a747","s_url":"https://bs.plantnet-project.org/th/s/b3de4566f4cdba0551e9b59ed0971ff35a38a747","author":"Annick LARBOUILLAT"},{"id":"3bd60f74714e9fa767d21352c9e3e3f1/200563.jpg","tag":"leaf","url":"https://bs.plantnet-project.org/img/8e055156cedebbc53b020b0b211d3658ae963e9c","m_url":"https://bs.plantnet-project.org/th/m/8e055156cedebbc53b020b0b211d3658ae963e9c","s_url":"https://bs.plantnet-project.org/th/s/8e055156cedebbc53b020b0b211d3658ae963e9c","author":"Pierre Bonnet"},{"id":"3bd60f74714e9fa767d21352c9e3e973/200552.jpg","tag":"leaf","url":"https://bs.plantnet-project.org/img/5c1a5fd30f3f6f5a05ba4b109eb001891132a10a","m_url":"https://bs.plantnet-project.org/th/m/5c1a5fd30f3f6f5a05ba4b109eb001891132a10a","s_url":"https://bs.plantnet-project.org/th/s/5c1a5fd30f3f6f5a05ba4b109eb001891132a10a","author":"Pierre Bonnet"},{"id":"211efee71013ba7e5fc1f3803ce74767/107772.jpg","tag":"fruit","url":"https://bs.plantnet-project.org/img/c990d7b9999953c162163801ddef541723f48236","m_url":"https://bs.plantnet-project.org/th/m/c990d7b9999953c162163801ddef541723f48236","s_url":"https://bs.plantnet-project.org/th/s/c990d7b9999953c162163801ddef541723f48236","author":"Annick LARBOUILLAT"},{"id":"3bd60f74714e9fa767d21352c9e3e3f1/200555.jpg","tag":"leaf","url":"https://bs.plantnet-project.org/img/7cf5cb1660932f963085b815baded463e65aa222","m_url":"https://bs.plantnet-project.org/th/m/7cf5cb1660932f963085b815baded463e65aa222","s_url":"https://bs.plantnet-project.org/th/s/7cf5cb1660932f963085b815baded463e65aa222","author":"Pierre Bonnet"}],"fam":"Ginkgoaceae","gen":"Ginkgo","sp":"Ginkgo biloba L.","cn":["Ginkgo","Maiden Hair Tree"]},{"name":"Prunus domestica L.","score":"1.12256002","organ":"habit","images":[{"id":"4dc7e2d10f7da7ef264e8d201c9d5cd7/184324.jpg","tag":"bark","url":"https://bs.plantnet-project.org/img/2ae2829d0dad3cffbb8c9faaea1dca43bf995a51","m_url":"https://bs.plantnet-project.org/th/m/2ae2829d0dad3cffbb8c9faaea1dca43bf995a51","s_url":"https://bs.plantnet-project.org/th/s/2ae2829d0dad3cffbb8c9faaea1dca43bf995a51","author":"Geneviève Botti"},{"id":"584c3095f9e52052bf841e95283476e0/eol_1d10fd3f0eaa03372ebfcf8a0515b529","tag":"habit","url":"https://bs.plantnet-project.org/img/d63574bed144811ef5367b7e87bce657f6314a13","m_url":"https://bs.plantnet-project.org/th/m/d63574bed144811ef5367b7e87bce657f6314a13","s_url":"https://bs.plantnet-project.org/th/s/d63574bed144811ef5367b7e87bce657f6314a13","author":"Valter Jacinto"}],"cn":[]},{"name":"Magnolia grandiflora L.","score":"1.05813563","organ":"bark","images":[{"id":"211efee71013ba7e5fc1f3803c2aad27/90831.jpg","tag":"flower","url":"https://bs.plantnet-project.org/img/187075f6537301970933a2ac356324b46be0803b","m_url":"https://bs.plantnet-project.org/th/m/187075f6537301970933a2ac356324b46be0803b","s_url":"https://bs.plantnet-project.org/th/s/187075f6537301970933a2ac356324b46be0803b","author":"hervé goëau"},{"id":"e3906ac4d9193cbb792cfb42933ec8b6/eol_86c7c741d2c0ac8b00006db713fc384d","tag":"flower","url":"https://bs.plantnet-project.org/img/8bbbd10c89b04d270d751bf40bdad79a6e1b821a","m_url":"https://bs.plantnet-project.org/th/m/8bbbd10c89b04d270d751bf40bdad79a6e1b821a","s_url":"https://bs.plantnet-project.org/th/s/8bbbd10c89b04d270d751bf40bdad79a6e1b821a","author":"pegdelancy"},{"id":"681b48c2995304c27c224f9a91d7256e/a1f0d1e5-81de-4ee4-aaeb-9cf8c4fc48be.jpg","tag":"bark","url":"https://bs.plantnet-project.org/img/777e3c22b8ab93e12c6a74b0ab8eb0b6464ac8d4","m_url":"https://bs.plantnet-project.org/th/m/777e3c22b8ab93e12c6a74b0ab8eb0b6464ac8d4","s_url":"https://bs.plantnet-project.org/th/s/777e3c22b8ab93e12c6a74b0ab8eb0b6464ac8d4","author":"Carre Jennifer"}],"fam":"Magnoliaceae","gen":"Magnolia","sp":"Magnolia grandiflora L.","cn":["Bull Bay","Evergreen Magnolia"]},{"name":"Olea europaea L.","score":"0.676558554","organ":"bark","images":[{"id":"329381230b8d16bec00876569291551f/29135.jpg","tag":"bark","url":"https://bs.plantnet-project.org/img/ea2e8aa9195368ece8a6e1566c28b57d11f4b65a","m_url":"https://bs.plantnet-project.org/th/m/ea2e8aa9195368ece8a6e1566c28b57d11f4b65a","s_url":"https://bs.plantnet-project.org/th/s/ea2e8aa9195368ece8a6e1566c28b57d11f4b65a","author":"Pierre Bonnet"},{"id":"f1e9f4683847c2bce74fd07b520b0624/27395.jpg","tag":"bark","url":"https://bs.plantnet-project.org/img/8e12af7b14500d5be1c6c098e5712129faec85b2","m_url":"https://bs.plantnet-project.org/th/m/8e12af7b14500d5be1c6c098e5712129faec85b2","s_url":"https://bs.plantnet-project.org/th/s/8e12af7b14500d5be1c6c098e5712129faec85b2","author":"hervé goëau"}],"fam":"Oleaceae","gen":"Olea","sp":"Olea europaea L.","cn":["Olive"]},{"name":"Phaseolus vulgaris L.","score":"0.610210538","organ":"fruit","images":[{"id":"b2833a9d5fbc04559056cf3a8598bcce/709793.jpg","tag":"fruit","url":"https://bs.plantnet-project.org/img/116d1d02ad7b6c10670e377e3612bc4b79e929a9","m_url":"https://bs.plantnet-project.org/th/m/116d1d02ad7b6c10670e377e3612bc4b79e929a9","s_url":"https://bs.plantnet-project.org/th/s/116d1d02ad7b6c10670e377e3612bc4b79e929a9","author":"Yoan MARTIN"}],"fam":"Fabaceae","gen":"Phaseolus","sp":"Phaseolus vulgaris L.","cn":["Common Bean","French Bean"]},{"name":"Mangifera indica L.","score":"0.607930541","organ":"fruit","images":[{"id":"961ffb7fa15e124257dc5fe35810a24a/eol_acd0cca3558274cf3c1272194294a5f4","tag":"fruit","url":"https://bs.plantnet-project.org/img/dcbbb790a5e48b1b82a5303d8f9c4ceecf986a7e","m_url":"https://bs.plantnet-project.org/th/m/dcbbb790a5e48b1b82a5303d8f9c4ceecf986a7e","s_url":"https://bs.plantnet-project.org/th/s/dcbbb790a5e48b1b82a5303d8f9c4ceecf986a7e","author":"Asit K. Ghosh Thaumaturgist"},{"id":"73d4687d3e3ccedda597372f636577a0/www-6ecb4fe5-a382-402f-9b4d-a52abfa90b0e.jpg","tag":"fruit","url":"https://bs.plantnet-project.org/img/683fc459183fb2a2de1a60148885c09870e43c16","m_url":"https://bs.plantnet-project.org/th/m/683fc459183fb2a2de1a60148885c09870e43c16","s_url":"https://bs.plantnet-project.org/th/s/683fc459183fb2a2de1a60148885c09870e43c16","author":"Thibault Nordey"},{"id":"961ffb7fa15e124257dc5fe3581325be/eol_c8e465a09b23b929a3ecf0c2b1d84d59","tag":"fruit","url":"https://bs.plantnet-project.org/img/a81f013e9130c99b2af1a7b028fdbb09cbcdec3d","m_url":"https://bs.plantnet-project.org/th/m/a81f013e9130c99b2af1a7b028fdbb09cbcdec3d","s_url":"https://bs.plantnet-project.org/th/s/a81f013e9130c99b2af1a7b028fdbb09cbcdec3d","author":"Asit K. Ghosh Thaumaturgist"},{"id":"961ffb7fa15e124257dc5fe358118d2c/eol_31e3be59d92bb1e8441bf3c1f8592f1a","tag":"fruit","url":"https://bs.plantnet-project.org/img/e67a674d5fadee6e33f3d5c3651395b3fa656b88","m_url":"https://bs.plantnet-project.org/th/m/e67a674d5fadee6e33f3d5c3651395b3fa656b88","s_url":"https://bs.plantnet-project.org/th/s/e67a674d5fadee6e33f3d5c3651395b3fa656b88","author":"Asit K. Ghosh Thaumaturgist"},{"id":"961ffb7fa15e124257dc5fe35812112a/eol_e36f3074be024a45339123e7a5c28454","tag":"fruit","url":"https://bs.plantnet-project.org/img/5fd7816a9ef0236aef833bd37feb8ff34c6c4c5b","m_url":"https://bs.plantnet-project.org/th/m/5fd7816a9ef0236aef833bd37feb8ff34c6c4c5b","s_url":"https://bs.plantnet-project.org/th/s/5fd7816a9ef0236aef833bd37feb8ff34c6c4c5b","author":"Asit K. Ghosh Thaumaturgist"},{"id":"961ffb7fa15e124257dc5fe358163464/eol_4aa863340caffc8ff17c50726c02a2f5","tag":"fruit","url":"https://bs.plantnet-project.org/img/4d8395ceb8895cd079a2c752859c59aef977a95f","m_url":"https://bs.plantnet-project.org/th/m/4d8395ceb8895cd079a2c752859c59aef977a95f","s_url":"https://bs.plantnet-project.org/th/s/4d8395ceb8895cd079a2c752859c59aef977a95f","author":"user at project|Evo101469|wikipedia|zh"}],"fam":"Anacardiaceae","gen":"Mangifera","sp":"Mangifera indica L.","cn":["Mango"]},{"name":"Robinia pseudoacacia L.","score":"0.592800915","images":[{"id":"befaf4a7c8684ab3ac3fcd6a4029578e/eol_80d0d2972da9a1aa3b262eee2598be29","tag":"flower","url":"https://bs.plantnet-project.org/img/62ff4419e1658158b7bf198d78b55846c446d2b1","m_url":"https://bs.plantnet-project.org/th/m/62ff4419e1658158b7bf198d78b55846c446d2b1","s_url":"https://bs.plantnet-project.org/th/s/62ff4419e1658158b7bf198d78b55846c446d2b1","author":"Drepanostoma"},{"id":"befaf4a7c8684ab3ac3fcd6a4029631a/eol_6cb8e9f5d700cf86649128bb3c442acd","tag":"flower","url":"https://bs.plantnet-project.org/img/79cd717a7d2cf8b69f1c60ee4a35284c3c8762d7","m_url":"https://bs.plantnet-project.org/th/m/79cd717a7d2cf8b69f1c60ee4a35284c3c8762d7","s_url":"https://bs.plantnet-project.org/th/s/79cd717a7d2cf8b69f1c60ee4a35284c3c8762d7","author":"Drepanostoma"},{"id":"211efee71013ba7e5fc1f3803cfeb74b/108533.jpg","tag":"fruit","url":"https://bs.plantnet-project.org/img/2df116665aceed18f228a40540670288906676df","m_url":"https://bs.plantnet-project.org/th/m/2df116665aceed18f228a40540670288906676df","s_url":"https://bs.plantnet-project.org/th/s/2df116665aceed18f228a40540670288906676df","author":"hervé goëau"},{"id":"211efee71013ba7e5fc1f3803cfeb74b/108535.jpg","tag":"fruit","url":"https://bs.plantnet-project.org/img/bee6eb69ad6a16ddad9aadcfd7b4ddaf9b69eeaf","m_url":"https://bs.plantnet-project.org/th/m/bee6eb69ad6a16ddad9aadcfd7b4ddaf9b69eeaf","s_url":"https://bs.plantnet-project.org/th/s/bee6eb69ad6a16ddad9aadcfd7b4ddaf9b69eeaf","author":"hervé goëau"},{"id":"85ec6fc9c3d476a040be9c8c88d1ff17/65943.jpg","tag":"fruit","url":"https://bs.plantnet-project.org/img/ca9dd1939e5a02d2262465d8edd54653da95ff0c","m_url":"https://bs.plantnet-project.org/th/m/ca9dd1939e5a02d2262465d8edd54653da95ff0c","s_url":"https://bs.plantnet-project.org/th/s/ca9dd1939e5a02d2262465d8edd54653da95ff0c","author":"hervé goëau"},{"id":"211efee71013ba7e5fc1f3803cfeb74b/108537.jpg","tag":"fruit","url":"https://bs.plantnet-project.org/img/2424e9a65bcada1649257e61f53085e149691d2c","m_url":"https://bs.plantnet-project.org/th/m/2424e9a65bcada1649257e61f53085e149691d2c","s_url":"https://bs.plantnet-project.org/th/s/2424e9a65bcada1649257e61f53085e149691d2c","author":"hervé goëau"}],"fam":"Fabaceae","gen":"Robinia","sp":"Robinia pseudoacacia L.","cn":["Black Locust","Common Acacia"]},{"name":"Ilex aquifolium L.","score":"0.504758716","organ":"bark","images":[{"id":"1f6f452e6368c7c811ffb836d9ed1021/213946.jpg","tag":"bark","url":"https://bs.plantnet-project.org/img/346447840dfed1a0bcde6a793b28b8d5f889ff9c","m_url":"https://bs.plantnet-project.org/th/m/346447840dfed1a0bcde6a793b28b8d5f889ff9c","s_url":"https://bs.plantnet-project.org/th/s/346447840dfed1a0bcde6a793b28b8d5f889ff9c","author":"vinchard"}],"fam":"Aquifoliaceae","gen":"Ilex","sp":"Ilex aquifolium L.","cn":["Common Holly","English Holly"]}],"error_results":[],"session":"e60681dd-08d9-4630-bfed-3b8e995b5463"};

    //console.log($scope.listResult);
    //$scope.showResults = false;

  }]);
